<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
<title>BET300 ¬∑ Registro</title>
<meta name="theme-color" content="#0b1020"/>
<style>
  :root{
    --bg:#0b1020; --panel:#111735; --panel2:#0d1330; --border:#212a57;
    --text:#e9ecff; --muted:#aab0d6; --ok:#25D366;
    --brand:#f0c86a; --brand2:#f7d887; /* mostaza del logo */
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;background:var(--bg);color:var(--text);font:16px/1.35 system-ui,-apple-system,Segoe UI,Roboto}
  body::before{
    content:"";position:fixed;inset:0;z-index:-1;
    background:
      radial-gradient(900px 500px at 85% -10%, rgba(124,77,255,.18), transparent),
      radial-gradient(700px 350px at 0% 0%, rgba(0,209,255,.12), transparent),
      linear-gradient(180deg,#0b1020 0%,#0b1020 60%,#0a0f1f 100%);
  }

  .wrap{max-width:820px;margin:24px auto;padding:0 14px}
  .card{background:var(--panel2);border:1px solid var(--border);border-radius:18px;box-shadow:0 16px 40px rgba(0,0,0,.35);padding:18px}
  .head{display:flex;align-items:center;justify-content:center;margin-bottom:8px}
  .logo{height:54px;display:block}
  h1{margin:8px 0 6px;text-align:center;font-size:24px}
  .note{color:var(--muted);text-align:center;font-size:14px;margin-bottom:14px}
  .pill{display:inline-flex;gap:6px;align-items:center;border:1px solid var(--border);background:linear-gradient(90deg,rgba(124,89,255,.12),rgba(34,211,238,.12));padding:6px 10px;border-radius:999px;font-size:12px}

  .form{display:grid;gap:12px;margin-top:10px}
  label{font-size:13px;color:var(--muted)}
  .input{
    width:100%;padding:12px 14px;border-radius:12px;border:1px solid var(--border);
    background:var(--panel);color:var(--text);outline:none
  }

  .btn{
    appearance:none;border:none;cursor:pointer;width:100%;
    padding:13px 16px;border-radius:14px;font-weight:900;letter-spacing:.3px;
    color:#0a0f1f;box-shadow:0 10px 24px rgba(0,0,0,.35)
  }
  .btn.primary{
    background:linear-gradient(90deg,var(--brand),var(--brand2));
    border:1px solid rgba(255,255,255,.06)
  }

  .error{color:#ff7a7a;font-size:13px}
  .footer{margin-top:14px;display:flex;justify-content:center}
  .tiny{font-size:12px;color:var(--muted);text-align:center}
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <div class="head">
      <!-- Si quer√©s, reemplaz√° por tu imagen: <img class="logo" src="./logo-bet300.png" alt="BET300"> -->
      <svg class="logo" viewBox="0 0 420 120" aria-label="BET300">
        <defs>
          <linearGradient id="g" x1="0" x2="0" y1="0" y2="1">
            <stop stop-color="#fff3ce"/>
            <stop offset="1" stop-color="#f0c86a"/>
          </linearGradient>
        </defs>
        <text x="0" y="82" font-size="88" font-family="system-ui,Segoe UI,Roboto" fill="white" font-weight="900">BET</text>
        <text x="180" y="82" font-size="88" font-family="system-ui,Segoe UI,Roboto" fill="url(#g)" font-weight="900">300</text>
      </svg>
    </div>

    <h1>Registrate para ingresar</h1>
    <p class="note">
      <span class="pill">üîí Autogesti√≥n disponible</span>
      &nbsp;‚Ä¢&nbsp; Soporte dentro de la plataforma
      &nbsp;‚Ä¢&nbsp; <b style="color:#bfefff">+30% 1¬™ carga</b>
    </p>

    <form id="regForm" class="form" autocomplete="off">
      <div>
        <label for="name">Nombre o apodo</label>
        <input id="name" class="input" type="text" name="name" minlength="2" maxlength="40" placeholder="Ej: Nico / Lau / ElTurco" required />
      </div>
      <div id="err" class="error" role="alert" style="display:none"></div>

      <button type="submit" class="btn primary">üéÅ Registrarse</button>
    </form>

    <p class="note" style="margin-top:10px">
      El operador asignar√° tu contrase√±a y te enviar√° el acceso.
    </p>

    <p class="note" style="font-size:12px;margin-top:6px">
      Us√° el link con <code>?pc=1</code>, <code>?pc=2</code>, <code>?pc=3</code> o <code>?pc=4</code> para enviar al WhatsApp correcto.
    </p>
  </div>

  <div class="footer">
    <p class="tiny">BET300 ¬© ‚Äî Si WhatsApp no abre, reintent√° en el navegador del sistema.</p>
  </div>
</div>

<script>
/* ===========================
   1) Configuraci√≥n de destinos
   =========================== */
const PC_NUMBERS = {
  1: "1171561685",
  2: "1171561022",
  3: "1134970581",
  4: "1135854862"
};
// Pasamos ‚Äú11XXXXXXXX‚Äù a E.164 para WhatsApp (AR CABA)
function buildAR(number11) {
  const n = (number11 || "").replace(/\D/g,"");
  return "54911" + n.slice(2);
}
const params = new URLSearchParams(location.search);
const pc = ["1","2","3","4"].includes(params.get("pc")) ? params.get("pc") : "1";
const wpLocal = buildAR(PC_NUMBERS[pc]);

/* ===========================
   2) Utilidades
   =========================== */
function fmtTs(d=new Date()){
  const dd=String(d.getDate()).padStart(2,'0');
  const mm=String(d.getMonth()+1).padStart(2,'0');
  const yyyy=d.getFullYear();
  const hh=String(d.getHours()).padStart(2,'0');
  const mi=String(d.getMinutes()).padStart(2,'0');
  return `${dd}/${mm}/${yyyy} ${hh}:${mi}`;
}
async function sha256hex(msg){
  const enc = new TextEncoder().encode(msg);
  const buf = await crypto.subtle.digest("SHA-256", enc);
  return Array.from(new Uint8Array(buf)).map(b=>b.toString(16).padStart(2,"0")).join("");
}

/* ===========================
   3) WhatsApp (redirecci√≥n directa)
   =========================== */
function openWhatsApp(phoneE164, text){
  const url = `https://api.whatsapp.com/send?phone=${encodeURIComponent(phoneE164)}&text=${encodeURIComponent(text)}`;
  location.href = url;
}

/* ===========================
   4) Formulario
   =========================== */
const f = document.getElementById("regForm");
const err = document.getElementById("err");

f.addEventListener("submit", async (e)=>{
  e.preventDefault();
  err.style.display="none"; err.textContent="";

  const name = document.getElementById("name").value.trim();
  if(name.length < 2){
    err.textContent = "Ingres√° un nombre o apodo v√°lido.";
    err.style.display = "block";
    return;
  }

  const ts   = fmtTs();
  const hash = (await sha256hex(`${name}|${pc}|${ts}`)).slice(0,10).toUpperCase();

  const texto =
`Hola üëã, quiero crear usuario en la plataforma.
‚Ä¢ PC: ${pc}
‚Ä¢ Nombre/Apodo: ${name}
‚Ä¢ Hash: ${hash}
‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
Por favor generen el acceso y compartan el link.`;

  const btn = f.querySelector('.btn.primary');
  btn.disabled = true; btn.textContent = "Abriendo WhatsApp‚Ä¶";
  openWhatsApp(wpLocal, texto);
  setTimeout(()=>{ btn.disabled = false; btn.textContent = "üéÅ Registrarse"; }, 3500);
});
</script>
</body>
</html>
