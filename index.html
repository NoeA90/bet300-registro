<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
<title>BET300 ¬∑ Registro</title>
<meta name="theme-color" content="#0b1020"/>
<style>
  :root{
    --bg:#0b1020; --panel:#111735; --panel2:#0d1330; --border:#212a57;
    --text:#e9ecff; --muted:#aab0d6;
    --brand:#f0c86a; --brand2:#f7d887;
  }
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%;font:16px/1.4 system-ui,-apple-system,Segoe UI,Roboto;background:var(--bg);color:var(--text);}
  body::before{
    content:"";position:fixed;inset:0;z-index:-1;
    background:radial-gradient(900px 500px at 85% -10%,rgba(124,77,255,.18),transparent),
               radial-gradient(700px 350px at 0% 0%,rgba(0,209,255,.12),transparent),
               linear-gradient(180deg,#0b1020 0%,#0b1020 60%,#0a0f1f 100%);
  }
  main{display:flex;flex-direction:column;min-height:100vh;justify-content:center;align-items:center;padding:20px}
  .card{background:var(--panel2);border:1px solid var(--border);border-radius:18px;box-shadow:0 16px 40px rgba(0,0,0,.35);padding:24px;width:100%;max-width:380px;text-align:center}
  /* Logo imagen + fallback texto */
  .logoWrap{display:flex;flex-direction:column;align-items:center;gap:6px;margin-bottom:2px}
  .logoImg{width:min(74%,320px);height:auto;display:block;filter:drop-shadow(0 2px 10px rgba(0,0,0,.25))}
  .logoText{font-weight:900;font-size:40px;letter-spacing:1px;display:none}
  .logoText span{background:linear-gradient(90deg,var(--brand),var(--brand2));-webkit-background-clip:text;color:transparent}
  h1{font-size:20px;margin-top:4px}
  .note{color:var(--muted);font-size:13px;margin:8px 0 18px}
  .pill{display:inline-block;background:rgba(255,255,255,.08);padding:4px 10px;border-radius:999px;font-size:12px;margin-bottom:8px}
  label{display:block;text-align:left;font-size:13px;color:var(--muted);margin-bottom:6px}
  .input{width:100%;padding:12px 14px;border-radius:12px;border:1px solid var(--border);background:var(--panel);color:var(--text);}
  .btn{width:100%;padding:13px 16px;margin-top:12px;border:none;border-radius:14px;font-weight:900;cursor:pointer;color:#0a0f1f;
       background:linear-gradient(90deg,var(--brand),var(--brand2));box-shadow:0 10px 24px rgba(0,0,0,.35)}
  .footer{margin-top:auto;text-align:center;font-size:12px;color:var(--muted);padding:10px 0}
</style>
</head>
<body>
<main>
  <div class="card">
    <div class="logoWrap">
      <!-- Cambi√° el src si lo aloj√°s en otro lugar -->
      <img id="brandImg" class="logoImg" src="/assets/bet300-logo.png" alt="BET300" />
      <!-- Fallback visible solo si la imagen falla -->
      <div id="brandTxt" class="logoText">BET <span>300</span></div>
    </div>

    <h1>Registro</h1>
    <div class="pill">üîí Autogesti√≥n disponible</div>
    <p class="note">Soporte dentro de la plataforma ‚Ä¢ <b style="color:#bfefff">+30% 1¬™ carga</b></p>

    <form id="regForm" autocomplete="off">
      <label for="name">Nombre o apodo</label>
      <input id="name" class="input" type="text" placeholder="Ej: Nico / Lau / ElTurco" required minlength="2" maxlength="40">
      <button type="submit" class="btn">üéÅ Registrarse</button>
      <p class="note" style="margin-top:10px">El operador asignar√° tu contrase√±a (pod√©s editarla luego) y te enviar√° el link de acceso</p>
    </form>
  </div>
  <div class="footer">BET300 ¬© ‚Äî Todos los derechos reservados.</div>
</main>

<script>
/* Fallback a texto si no carga el logo */
(function(){
  const img = document.getElementById('brandImg');
  const txt = document.getElementById('brandTxt');
  img.addEventListener('error', ()=>{ img.style.display='none'; txt.style.display='block'; });
  // Si tarda en cargar mucho, mostramos texto como respaldo
  setTimeout(()=>{ if(!img.complete) { img.style.display='none'; txt.style.display='block'; }}, 3000);
})();

/* WhatsApp por PC */
const PC_NUMBERS={1:"1171561685",2:"1171561022",3:"1171331067",4:"1135854862"};
function buildAR(n){ n=(n||"").replace(/\D/g,""); return "54911"+n.slice(2); }
const q=new URLSearchParams(location.search);
const pc=["1","2","3","4"].includes(q.get("pc"))?q.get("pc"):"1";
const wp=buildAR(PC_NUMBERS[pc]);

/* Utilidades */
async function hash(t){
  const e=new TextEncoder().encode(t);
  const b=await crypto.subtle.digest("SHA-256",e);
  return Array.from(new Uint8Array(b)).map(x=>x.toString(16).padStart(2,"0")).join("");
}
function ts(){
  const d=new Date(),f=x=>String(x).padStart(2,"0");
  return `${f(d.getDate())}/${f(d.getMonth()+1)}/${d.getFullYear()} ${f(d.getHours())}:${f(d.getMinutes())}`;
}
function openWA(phone,msg){
  location.href=`https://api.whatsapp.com/send?phone=${encodeURIComponent(phone)}&text=${encodeURIComponent(msg)}`;
}

/* Submit */
const form=document.getElementById("regForm");
form.addEventListener("submit", async (e)=>{
  e.preventDefault();
  const n=document.getElementById("name").value.trim();
  if(n.length<2){ alert("Ingres√° un nombre o apodo v√°lido."); return; }
  const h=(await hash(`${n}|${pc}|${ts()}`)).slice(0,10).toUpperCase();
  const msg=`Hola üëã, quiero crear usuario en la plataforma.\n‚Ä¢ PC: ${pc}\n‚Ä¢ Nombre/Apodo: ${n}\n‚Ä¢ Hash: ${h}\n‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî\nPor favor generen el acceso y compartan el link.`;
  const btn=form.querySelector(".btn");
  btn.disabled=true; btn.textContent="Abriendo WhatsApp‚Ä¶";
  openWA(wp,msg);
  setTimeout(()=>{ btn.disabled=false; btn.textContent="üéÅ Registrarse"; }, 3500);
});
</script>
</body>
</html>
